{
  "metadata": {
    "name": "iCamera Proxy Installer",
    "version": "1.0.0",
    "description": "GUI-based installer for iCamera Proxy configuration",
    "author": "Aminul Islam",
    "created": "2025-08-27",
    "copyright": "Copyright Â© 2025 Consultancy Services",
    "requiresAdmin": true
  },
  "installation": {
    "totalSteps": 10,
    "directoryName": "iCamera"
  },
  "ui": {
    "windowTitle": "iCamera Proxy Installer",
    "windowWidth": 400,
    "windowHeight": 400,
    "progressBarHeight": 20
  },
  "cleanup": {
    "taskName": "iCameraProcessMonitor",
    "folderName": "iCamera"
  },
  "requirements": {
    "minimumRamGB": 8,
    "minimumDiskSpaceGB": 2,
    "connectivityUrls": [
      "https://g01.tcsion.com",
      "https://cctv4.tcsion.com",
      "https://cctv8.tcsion.com"
    ]
  },
  "dependencies": {
    "searchFolders": [
      ".",
      "$env:USERPROFILE\\Downloads"
    ],
    "packages": {
      "jre": {
        "name": "Java Runtime Environment",
        "filePattern": "*corretto*jre*,*openjdk*8*",
        "supportedExtensions": [
          ".zip"
        ],
        "downloadUrl": "https://corretto.aws/downloads/latest/amazon-corretto-8-x64-windows-jre.zip",
        "sha256": "",
        "targetSubfolder": "jre",
        "localOnly": false,
        "verifyExecutable": "bin\\java.exe",
        "category": "runtime"
      },
      "hsqldb": {
        "name": "HSQLDB",
        "filePattern": "hsqldb*",
        "supportedExtensions": [
          ".zip"
        ],
        "downloadUrl": "https://master.dl.sourceforge.net/project/hsqldb/hsqldb/hsqldb_2_3/hsqldb-2.3.4.zip?viasf=1",
        "sha256": "C00547495CA8F1DE29CCBDD41965AB130ACBC616F32DCBE58B3AED16169C962E",
        "targetSubfolder": "hsqldb",
        "localOnly": false,
        "verifyExecutable": "hsqldb\\lib\\hsqldb.jar",
        "category": "database"
      },
      "procrun": {
        "name": "Apache Commons Daemon",
        "filePattern": "*daemon*,*procrun*",
        "supportedExtensions": [
          ".zip"
        ],
        "downloadUrl": "https://downloads.apache.org/commons/daemon/binaries/windows/commons-daemon-1.4.1-bin-windows.zip",
        "sha256": "",
        "targetSubfolder": "procrun",
        "localOnly": false,
        "verifyExecutable": "prunsrv.exe",
        "category": "service"
      },
      "ffmpeg": {
        "name": "FFmpeg Essentials",
        "filePattern": "ffmpeg*",
        "supportedExtensions": [
          ".zip",
          ".7z"
        ],
        "downloadUrl": "https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-essentials.7z",
        "sha256": "",
        "targetSubfolder": "ffmpeg",
        "localOnly": false,
        "verifyExecutable": "bin\\ffmpeg.exe",
        "category": "media"
      },
      "7zr": {
        "name": "7-Zip Standalone",
        "filePattern": "7zr",
        "supportedExtensions": [
          ".exe"
        ],
        "downloadUrl": "https://www.7-zip.org/a/7zr.exe",
        "sha256": "",
        "targetSubfolder": "tools",
        "localOnly": false,
        "verifyExecutable": "7zr.exe",
        "category": "tools"
      }
    }
  },
  "database": {
    "defaultPort": 9001,
    "portRange": {
      "start": 9001,
      "end": 9100
    },
    "name": "db0",
    "username": "SA",
    "password": "",
    "memoryDbId": "mem",
    "dataDirectory": "hsqldb/data",
    "initScripts": [
      "database-scripts/create.script",
      "database-scripts/insert.script"
    ],
    "appScript": "CameraProxy.sql",
    "queries": {
      "installInfo": "SELECT id AS proxy_id, proxy_name FROM public.mspgbl_camera_proxy;",
      "fileCatalystCheck": "SELECT CASE WHEN COUNT(*) > 0 THEN 'TRUE' ELSE 'FALSE' END AS install_fc_hotfolder FROM public.msp_camera_adapter WHERE adapter_impl_id_fk = 1017;"
    }
  },
  "filecatalyst": {
    "installerPattern": "*filecatalyst*hotfolder*,install_fc_hotfolder",
    "downloadUrl": "https://filecatalyst.software/public/filecatalyst/Direct/4.0.0.375/Windows/install_fc_hotfolder.exe",
    "settingsFile": "fc_hotfolder_settings.inf",
    "saveInfCommand": "/SAVEINF",
    "loadInfCommand": "/VERYSILENT /LOADINF",
    "noRestartArg": "/NORESTART",
    "hotFolderId": "iCameraHotFolder",
    "hotFolderLocation": "{install_path}\\filecatalyst-hotfolder",
    "supportedExtensions": [
      ".exe",
      ".zip"
    ]
  },
  "application": {
    "destinationFolder": "app",
    "logsFolder": "logs",
    "files": [
      "CameraProxy.jar",
      "proxy-details.properties",
      "logback.xml"
    ],
    "configurations": {
      "proxy-details.properties": {
        "url": "jdbc:hsqldb:hsql://localhost:{port}/{dbname}",
        "filecatalyst.install.path": "{fc_install_path}",
        "filecatalyst.hotfolder.path": "{fc_hotfolder_path}"
      },
      "logback.xml": {
        "logLevel": "INFO"
      }
    }
  },
  "services": {
    "hsqldb": {
      "name": "iCameraHSQLDB",
      "displayName": "iCamera HSQLDB Service",
      "description": "HSQLDB database service for iCamera Proxy",
      "startMode": "auto",
      "workingDirectory": "{install_path}\\{hsqldb_folder}",
      "jvmOptions": [
        "-Xms256m",
        "-Xmx512m"
      ],
      "mainClass": "org.hsqldb.server.Server",
      "arguments": [
        "--props",
        "{install_path}\\{hsqldb_folder}\\server.properties"
      ],
      "stdOutput": "{logs_folder}\\hsqldb-stdout.log",
      "stdError": "{logs_folder}\\hsqldb-stderr.log",
      "restartDelay": 60000,
      "maxRestartAttempts": 3,
      "resetInterval": 3600
    },
    "icameraproxy": {
      "name": "iCameraProxy",
      "displayName": "iCamera Proxy Service",
      "description": "iCamera Proxy application service",
      "startMode": "auto",
      "dependsOn": "iCameraHSQLDB",
      "workingDirectory": "{install_path}\\{proxy_folder}",
      "jvmOptions": [
        "-Xms512m",
        "-Xmx1024m",
        "-Dlogback.configurationFile=logback.xml",
        "-Djava.awt.headless=true",
        "-Dicamera.home={install_path}\\{proxy_folder}",
        "-Dicamera.config.path={install_path}\\{proxy_folder}\\proxy-details.properties",
        "-Dicamera.logs.path={install_path}\\{proxy_folder}\\{logs_folder}",
        "-Dffmpeg.path={install_path}\\{ffmpeg_folder}\\bin\\ffmpeg.exe",
        "-Dfilecatalyst.hotfolder.path={install_path}\\filecatalyst-hotfolder",
        "-Djava.io.tmpdir={install_path}\\{proxy_folder}\\temp",
        "-Dfile.encoding=UTF-8",
        "-Duser.timezone=UTC"
      ],
      "environmentVars": {
        "ICAMERA_PROXY_HOME": "{install_path}\\{proxy_folder}",
        "FFMPEG_HOME": "{install_path}\\ffmpeg\\bin"
      },
      "mainClass": "com.cameraproxy.CameraProxy",
      "jarFile": "CameraProxy.jar",
      "stdOutput": "{logs_folder}\\icamera-stdout.log",
      "stdError": "{logs_folder}\\icamera-stderr.log",
      "restartDelay": 60000,
      "maxRestartAttempts": 5,
      "resetInterval": 3600
    }
  }
}